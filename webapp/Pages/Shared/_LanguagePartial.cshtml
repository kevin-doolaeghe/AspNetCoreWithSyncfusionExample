<ul class="navbar-nav">
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="" id="languageSelector" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa-solid fa-language"></i> @Thread.CurrentThread.CurrentUICulture.Name
        </a>
        <div class="dropdown-menu" aria-labelledby="languageSelector">
            <form class="form-inline" asp-page="/Language" asp-route-newCulture="en-US">
                <button type="submit" class="dropdown-item">@Localizer["English"]</button>
            </form>
            <form class="form-inline" asp-page="/Language" asp-route-newCulture="fr-FR">
                <button type="submit" class="dropdown-item">@Localizer["French"]</button>
            </form>
        </div>
    </li>
</ul>

<script>
    function changeCulture(culture, currency) {
        let ajax = new ej.base.Ajax(location.origin + "/locale/" + culture + ".json", "GET", false);
        ajax.send().then((args) => ej.base.L10n.load(JSON.parse(args)));

        let cultureFiles = ["ca-generic.json", "ca-gregorian.json", "dateFields.json", "numbers.json", "timeZoneNames.json", "units.json"];
        cultureFiles.forEach((file) => {
            ajax = new ej.base.Ajax(location.origin + "/locale/cldr-data/main/" + culture + "/" + file, "GET", false);
            ajax.send().then((args) => ej.base.loadCldr(JSON.parse(args)));
        });

        ej.base.setCurrencyCode(currency);
        ej.base.setCulture(culture);
    }

    let culture = "@Thread.CurrentThread.CurrentUICulture.Name";
    let currency = "@Localizer["Currency"]";
    changeCulture(culture, currency);
</script>
